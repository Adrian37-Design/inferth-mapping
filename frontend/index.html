<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inferth Mapping - Fleet Tracking</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css" />
    <link rel="stylesheet" href="/static/app.css?v=56">
    <link rel="stylesheet" href="/static/users.css?v=56">
    <link rel="icon" type="image/png" href="/static/inferth_mapping_logo.png">
    <script src="/static/auth.js?v=56"></script>

</head>

<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-brand">
            <img src="/static/inferth_mapping_logo.png" alt="Inferth Logo" class="brand-logo">
            <span id="nav-brand-name">Inferth Mapping</span>
            <span class="role-badge" id="user-role-display"></span>
        </div>
        <div class="nav-stats">
            <div class="stat-item">
                <i class="fas fa-circle" id="status-dot"></i>
                <span id="status-text">Connecting...</span>
            </div>
            <button class="logout-btn" id="logout-btn" title="Logout"
                onclick="window.AuthManager && window.AuthManager.logout()">
                <i class="fas fa-sign-out-alt"></i>
                <span>Logout</span>
            </button>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Tabbed Sidebar -->
        <aside class="sidebar-container" id="sidebar">
            <!-- Icon Rail -->
            <div class="sidebar-rail">


                <div class="rail-item" data-tab="tab-fleet" title="Fleet">
                    <i class="fas fa-map-marker-alt"></i>
                </div>
                <div class="rail-item active" data-tab="tab-dashboard" title="Dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                </div>
                <div class="rail-item" data-tab="tab-alerts" title="Alerts">
                    <i class="fas fa-bell"></i>
                    <span class="rail-badge hidden" id="rail-alerts-count">0</span>
                </div>
                <!-- Reports & Intelligence Tab -->
                <div class="rail-item" data-tab="tab-reports" title="Intelligence">
                    <i class="fas fa-chart-pie"></i>
                </div>
                <div class="rail-item hidden" data-tab="tab-users" title="Management" id="rail-users-btn">
                    <i class="fas fa-users-cog"></i>
                </div>
                <!-- Companies Tab -->
                <div class="rail-item hidden" data-tab="tab-companies" title="Companies" id="rail-companies">
                    <i class="fas fa-building"></i>
                </div>
                <!-- Audit Logs Tab (Admin Only) -->
                <div class="rail-item hidden" data-tab="tab-audit" title="Audit Logs" id="rail-audit-btn">
                    <i class="fas fa-shield-alt"></i>
                </div>

            </div>

            <!-- Panel Content -->
            <div class="sidebar-panel">
                <div class="panel-header">
                    <h3 id="panel-title">Dashboard</h3>
                    <button class="toggle-panel" id="toggle-sidebar-btn">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                </div>

                <!-- Tab: Asset Detail View (STEP 5) -->
                <div id="tab-asset-detail" class="tab-content">
                    <div class="asset-header-container">
                        <div class="asset-title-row">
                            <button class="btn-text back-btn" onclick="closeAssetDetail()">
                                <i class="fas fa-arrow-left"></i>
                            </button>
                            <h2 id="detail-name">Vehicle Name</h2>
                            <span class="status-badge" id="detail-status">Unknown</span>
                        </div>
                        <div class="asset-subtitle" id="detail-driver">No Driver Assigned</div>
                    </div>

                    <div class="detail-scroll-area">
                        <!-- Section 1: Current Status -->
                        <div class="detail-section">
                            <h4 class="section-title">Current Status</h4>
                            <div class="status-grid">
                                <div class="status-item">
                                    <i class="fas fa-tachometer-alt"></i>
                                    <span class="status-label">Speed</span>
                                    <span class="status-value" id="detail-speed">0 km/h</span>
                                </div>
                                <div class="status-item">
                                    <i class="fas fa-key"></i>
                                    <span class="status-label">Ignition</span>
                                    <span class="status-value" id="detail-ignition">Off</span>
                                </div>
                                <div class="status-item">
                                    <i class="fas fa-map-marker-alt"></i>
                                    <span class="status-label">Location</span>
                                    <span class="status-value" id="detail-coords">--</span>
                                </div>
                                <div class="status-item">
                                    <i class="fas fa-clock"></i>
                                    <span class="status-label">Last Seen</span>
                                    <span class="status-value" id="detail-last-seen">Just now</span>
                                </div>
                            </div>
                        </div>

                        <!-- Section 2: Timeline & History -->
                        <div class="detail-section">
                            <h4 class="section-title">History & Timeline</h4>
                            <div class="history-controls">
                                <input type="date" id="history-date-picker" class="form-select-small">
                                <button class="btn-small" id="load-history-btn">Load</button>
                            </div>
                            <div class="timeline-view" id="detail-timeline">
                                <p class="empty-state">Select a range to view history</p>
                            </div>
                        </div>

                        <!-- Section 3: Quick Actions -->
                        <div class="detail-section">
                            <h4 class="section-title">Quick Actions</h4>
                            <div class="action-grid">
                                <button class="action-btn" id="action-geofence" title="Create Geofence"
                                    onclick="window.triggerGeofenceAction()">
                                    <div class="action-icon"><i class="fas fa-draw-polygon"></i></div>
                                    <span>Geofence</span>
                                </button>
                                <button class="action-btn" id="action-report" title="Download Report"
                                    onclick="window.triggerReportAction()">
                                    <div class="action-icon"><i class="fas fa-file-download"></i></div>
                                    <span>Report</span>
                                </button>
                                <button class="action-btn" id="action-alert" title="Set Alert"
                                    onclick="window.triggerAlertAction()">
                                    <div class="action-icon"><i class="fas fa-bell"></i></div>
                                    <span>Alert</span>
                                </button>
                                <button class="action-btn" id="action-driver" title="Assign Driver"
                                    onclick="window.openAssignDriver()">
                                    <div class="action-icon"><i class="fas fa-id-card"></i></div>
                                    <span>Driver</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab: Fleet List -->
                <div id="tab-fleet" class="tab-content">
                    <div class="action-bar">
                        <button class="btn-small" id="add-vehicle-sidebar"
                            onclick="document.getElementById('add-vehicle-modal').classList.remove('hidden')"><i
                                class="fas fa-plus"></i> Add</button>
                    </div>
                    <div class="vehicle-list" id="vehicle-list">
                        <p class="loading">Loading vehicles...</p>
                    </div>
                </div>

                <!-- Tab: Dashboard (Entry Point) -->
                <div id="tab-dashboard" class="tab-content active">
                    <!-- Fleet Snapshot (KPIs) -->
                    <div class="dashboard-section">
                        <h4 class="section-title">Fleet Snapshot</h4>
                        <div class="kpi-grid">
                            <div class="kpi-card active-card">
                                <span class="kpi-value" id="kpi-active">0</span>
                                <span class="kpi-label">Active</span>
                            </div>
                            <div class="kpi-card idle-card">
                                <span class="kpi-value" id="kpi-idle">0</span>
                                <span class="kpi-label">Idle</span>
                            </div>
                            <div class="kpi-card alert-card">
                                <span class="kpi-value" id="kpi-alerts">0</span>
                                <span class="kpi-label">Alerts Today</span>
                            </div>
                            <div class="kpi-card offline-card">
                                <span class="kpi-value" id="kpi-offline">0</span>
                                <span class="kpi-label">Offline</span>
                            </div>
                        </div>
                    </div>

                    <hr class="panel-divider">

                    <!-- Priority Alerts Panel -->
                    <div class="dashboard-section">
                        <h4 class="section-title">Priority Alerts</h4>
                        <div id="priority-alerts-list" class="priority-list">
                            <p class="empty-state">No priority alerts</p>
                        </div>
                    </div>
                </div>

                <!-- Tab: Alerts -->
                <div id="tab-alerts" class="tab-content">
                    <div class="alert-controls">
                        <h4 class="section-title">Rules Engine</h4>
                    </div>

                    <!-- Rule Builder UI (Sentence Form) -->
                    <div class="rules-builder-card">
                        <div class="sentence-builder">
                            <span>Notify me when</span>
                            <select id="rule-asset" class="inline-select">
                                <option value="all">Any Vehicle</option>
                                <option value="group_a">Heavy Trucks</option>
                            </select>
                            <span>triggers</span>
                            <select id="rule-event" class="inline-select">
                                <option value="speeding">Speeding</option>
                                <option value="geofence_exit">Geofence Exit</option>
                                <option value="offline">Offline</option>
                                <option value="harsh_braking">Harsh Braking</option>
                            </select>
                            <!-- Dynamic Input (Visible based on event) -->
                            <span id="rule-value-container">
                                <span>over</span>
                                <input type="number" id="rule-value" class="inline-input" placeholder="0" value="80">
                                <span id="rule-unit">km/h</span>
                            </span>
                        </div>
                        <div class="sentence-builder-row2">
                            <span>via</span>
                            <select id="rule-channel" class="inline-select">
                                <option value="email">Email</option>
                                <option value="sms">SMS</option>
                            </select>
                            <span id="contact-container" style="display: inline; margin-left: 10px;">
                                <input type="text" id="rule-contact" class="inline-input"
                                    placeholder="Enter email address..." style="min-width: 150px;">
                            </span>
                            <button id="save-rule-btn" class="btn-primary btn-sm" onclick="saveRule()">
                                <i class="fas fa-plus"></i> Save Rule
                            </button>
                        </div>
                    </div>

                    <div class="alert-controls" style="margin-top: 20px;">
                        <h4 class="section-title">Active Rules</h4>
                        <button class="btn-text" id="clear-alerts">Clear History</button>
                    </div>

                    <div id="active-rules-list" class="rules-list">
                        <!-- Rules will appear here -->
                        <p class="empty-state">No rules defined. Try creating one above.</p>
                    </div>

                    <hr class="panel-divider">

                    <div class="alert-controls">
                        <h4 class="section-title">Recent Alerts</h4>
                    </div>
                    <div id="alerts-list" class="sidebar-list">
                        <p class="empty-state">No new alerts</p>
                    </div>
                </div>

                <!-- Tab: Reports & Intelligence -->
                <div id="tab-reports" class="tab-content">
                    <div class="reports-header">
                        <div class="date-range-picker">
                            <span>Last 30 Days</span> <i class="fas fa-chevron-down"></i>
                        </div>
                        <button class="btn-primary" onclick="exportReport()">
                            <i class="fas fa-download"></i> Export
                        </button>
                    </div>

                    <!-- Monetization Hook: Savings Widget -->
                    <div class="savings-widget">
                        <div class="savings-icon">
                            <i class="fas fa-coins"></i>
                        </div>
                        <div class="savings-content">
                            <h4>Estimated Monthly Savings</h4>
                            <div class="savings-amount" id="report-savings">$0.00</div>
                            <p class="savings-disclaimer">Based on idle reduction & fuel efficiency</p>
                        </div>
                    </div>

                    <!-- 4-Quadrant Layout -->
                    <div class="reports-grid">
                        <!-- Quadrant 1: Usage -->
                        <div class="report-card">
                            <div class="report-card-header">
                                <h5><i class="fas fa-clock"></i> Usage & Productivity</h5>
                            </div>
                            <div class="report-summary" id="report-usage-summary">
                                Fleet utilization is up 5% this week.
                            </div>
                            <div class="chart-placeholder" id="chart-usage">
                                <!-- CSS Bars -->
                            </div>
                        </div>

                        <!-- Quadrant 2: Behavior -->
                        <div class="report-card">
                            <div class="report-card-header">
                                <h5><i class="fas fa-user-shield"></i> Driver Behavior</h5>
                            </div>
                            <div class="report-summary" id="report-behavior-summary">
                                3 harsh braking events detected.
                            </div>
                            <div class="chart-placeholder" id="chart-behavior"></div>
                        </div>

                        <!-- Quadrant 3: Fuel -->
                        <div class="report-card">
                            <div class="report-card-header">
                                <h5><i class="fas fa-gas-pump"></i> Fuel & Cost</h5>
                            </div>
                            <div class="report-summary" id="report-fuel-summary">
                                Est. fuel cost: $1,200 (Mock)
                            </div>
                            <div class="chart-placeholder" id="chart-fuel"></div>
                        </div>

                        <!-- Quadrant 4: Compliance -->
                        <div class="report-card">
                            <div class="report-card-header">
                                <h5><i class="fas fa-clipboard-check"></i> Compliance</h5>
                            </div>
                            <div class="report-summary" id="report-compliance-summary">
                                All vehicles active within hours.
                            </div>
                            <div class="compliance-list" id="report-compliance-list">
                                <div class="compliance-item ok"><i class="fas fa-check"></i> Insurance</div>
                                <div class="compliance-item ok"><i class="fas fa-check"></i> Service</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab: Geofencing (STEP 8) -->
                <div id="tab-geofence" class="tab-content">
                    <div class="panel-section">
                        <div class="alert-controls">
                            <h4 class="section-title">Geofence Manager</h4>
                            <button class="btn-text" id="exit-geofence-btn" title="Exit">
                                <i class="fas fa-times"></i> Exit
                            </button>
                        </div>

                        <!-- Mini Map for Drawing (Always Visible) -->
                        <div id="geo-mini-map" class="mini-map-container" style="height: 250px; margin-bottom: 15px;">
                        </div>
                        <p class="helper-text" style="font-size: 0.8rem; color: #aaa; margin-bottom: 15px;">
                            <i class="fas fa-info-circle"></i> Draw and manage zones on this map.
                        </p>

                        <!-- Active Zones List -->
                        <div class="rules-list" id="geofence-list">
                            <div id="active-zones-container">
                                <p class="empty-state">No geofences active.</p>
                            </div>
                        </div>
                    </div>

                    <!-- New Geofence Form (Inputs Only, Hidden by default) -->
                    <div id="new-geofence-form" class="rules-builder-card hidden">
                        <h4 style="margin-top:0; color:var(--primary);">Zone Details</h4>

                        <div class="form-group">
                            <label>Zone Name</label>
                            <input type="text" id="geo-name" class="glass-input" placeholder="e.g. HQ Perimeter">
                        </div>

                        <!-- Removed Assign Assets as requested -->

                        <div class="form-group" style="margin-top:10px;">
                            <label style="margin-bottom: 5px; display: block;">Alert Triggers</label>
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="geo-rule-entry" checked>
                                    <span>Alert on Entry</span>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="geo-rule-exit">
                                    <span>Alert on Exit</span>
                                </label>
                            </div>
                        </div>

                        <div class="form-group" style="margin-top:10px;">
                            <label>Notification Channel</label>
                            <div class="sentence-builder-row2" style="margin-top: 5px; justify-content: flex-start;">
                                <select id="geo-channel" class="inline-select" style="width: auto;">
                                    <option value="system">System Only</option>
                                    <option value="email">Email</option>
                                    <option value="sms">SMS</option>
                                </select>
                                <input type="text" id="geo-contact" class="inline-input hidden"
                                    placeholder="Enter contact..." style="min-width: 150px;">
                            </div>
                        </div>

                        <div class="form-actions" style="margin-top:15px; display:flex; gap:10px;">
                            <button class="btn-secondary btn-sm" id="cancel-geo-btn">Cancel</button>
                            <button class="btn-primary btn-sm" id="save-geo-btn">Save Zone</button>
                        </div>
                    </div>

                    <hr class="panel-divider">

                    <div class="panel-section">
                        <h4 class="section-title">Recent Violations</h4>
                        <div class="priority-list" id="geo-violations-list">
                            <!-- Mock Violations -->
                        </div>
                    </div>
                </div>

                <!-- Tab: Users -->
                <div id="tab-users" class="tab-content">
                    <div class="action-bar">
                        <button class="btn-small" id="invite-user-sidebar"
                            onclick="document.getElementById('user-form-modal').classList.remove('hidden')"><i
                                class="fas fa-user-plus"></i>
                            Add User</button>
                    </div>
                    <div id="users-list" class="users-list-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Role</th>
                                    <th>Company</th>
                                    <th>Last Login</th>
                                    <th>Scope</th>
                                    <th class="text-center">Status</th>
                                    <th class="text-right">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="users-table-body">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Tab: Audit Logs -->
                <div id="tab-audit" class="tab-content">
                    <div class="panel-header">
                        <h2><i class="fas fa-shield-alt"></i> System Audit Logs</h2>
                    </div>
                    <div class="audit-list-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Time</th>
                                    <th>User</th>
                                    <th>Action</th>
                                    <th>Details</th>
                                    <th>IP</th>
                                </tr>
                            </thead>
                            <tbody id="audit-table-body">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Tab: Companies -->
                <div id="tab-companies" class="tab-content">
                    <div class="panel-header" style="justify-content: space-between;">
                        <h2><i class="fas fa-building"></i> Company Management</h2>
                        <button class="btn-primary"
                            onclick="document.getElementById('company-form-modal').classList.remove('hidden')">
                            <i class="fas fa-plus"></i> New Company
                        </button>
                    </div>
                    <div class="users-list-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Logo</th>
                                    <th>Company Name</th>
                                    <th>ID</th>
                                    <th class="text-right">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="companies-table-body">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Map Container -->
        <div class="map-wrapper">
            <div id="map"></div>

            <!-- Dashboard Summary REMOVED (Moved to Sidebar) -->

            <!-- Route Controls (Hidden by default) -->
            <div class="route-controls hidden" id="route-controls">
                <button class="control-btn" id="play-route" title="Play Route">
                    <i class="fas fa-play"></i>
                </button>
                <button class="control-btn" id="pause-route" title="Pause">
                    <i class="fas fa-pause"></i>
                </button>
                <button class="control-btn" id="stop-route" title="Stop">
                    <i class="fas fa-stop"></i>
                </button>
                <div class="speed-control">
                    <label>Speed: <span id="speed-value">1x</span></label>
                    <input type="range" id="playback-speed" min="1" max="10" value="1">
                </div>
            </div>
        </div>

        <!-- Floating Action Buttons -->
        <!-- Only map-specific tools remain -->
        <div class="fab-container">
            <button class="fab" id="center-map" title="Center Map">
                <i class="fas fa-crosshairs"></i>
            </button>
        </div>
    </div>

    <!-- Modals (Simplified) -->
    <!-- Invite/Edit User Modal only needed for form input, list is now in sidebar -->
    <div class="modal hidden" id="user-form-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-user-plus"></i> Add User</h3>
                <button class="close-modal" id="close-user-form"
                    onclick="document.getElementById('user-form-modal').classList.add('hidden')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="invite-user-form">
                    <div class="form-group">
                        <input type="email" id="invite-email" placeholder="Email Address" required>
                    </div>
                    <div class="form-group">
                        <select id="invite-role">
                            <option value="viewer">Viewer</option>
                            <option value="manager">Manager</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="invite-tenant">Assign to Company</label>
                        <select id="invite-tenant" required>
                            <!-- Populated by JS -->
                        </select>
                    </div>
                    <button type="submit" class="btn-primary">Add User</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit User Modal -->
    <div class="modal hidden" id="edit-user-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-user-edit"></i> Edit User</h3>
                <button class="close-modal" id="close-edit-user"
                    onclick="document.getElementById('edit-user-modal').classList.add('hidden')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="edit-user-form">
                    <input type="hidden" id="edit-user-id">
                    <div class="form-group">
                        <label>User</label>
                        <input type="text" id="edit-user-email" disabled>
                    </div>
                    <div class="form-group">
                        <label for="edit-user-role">Role</label>
                        <select id="edit-user-role" required>
                            <option value="viewer">Viewer</option>
                            <option value="manager">Manager</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="edit-user-tenant">Company</label>
                        <select id="edit-user-tenant" required>
                            <!-- Populated by JS -->
                        </select>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="cancel-edit-user"
                            onclick="document.getElementById('edit-user-modal').classList.add('hidden')">Cancel</button>
                        <button type="submit" class="btn-primary">Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Trip History Modal -->
    <div class="modal hidden" id="trip-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Trip History</h3>
                <button class="close-modal" id="close-trip-modal"
                    onclick="document.getElementById('trip-modal').classList.add('hidden')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="date-selector">
                    <label>Last <input type="number" id="trip-days" value="7" min="1" max="30"> days</label>
                    <button id="load-trips">Load Trips</button>
                </div>
                <div id="trip-list" class="trip-list">
                    <p>Select a vehicle and load trips</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Company Form Modal -->
    <div class="modal hidden" id="company-form-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-building"></i> Add Company</h3>
                <button class="close-modal" id="close-company-form"
                    onclick="document.getElementById('company-form-modal').classList.add('hidden')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="add-tenant-form">
                    <div class="form-group">
                        <label for="tenant-name">Company Name</label>
                        <input type="text" id="tenant-name" placeholder="e.g., Acme Logistics" required>
                    </div>
                    <div class="form-group">
                        <label for="tenant-logo">Company Logo (PNG/JPG)</label>
                        <div class="file-input-wrapper">
                            <input type="file" id="tenant-logo" accept="image/*">
                            <label for="tenant-logo" class="file-label">
                                <i class="fas fa-cloud-upload-alt"></i> <span>Choose file</span>
                            </label>
                        </div>
                        <small>We will automatically extract brand colors from this logo! ðŸŽ¨</small>
                    </div>



                    <button type="submit" class="btn-primary" style="width: 100%; margin-top: 10px;">Create Company &
                        Brand</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Vehicle Modal -->
    <div class="modal hidden" id="add-vehicle-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-car"></i> Add New Vehicle</h3>
                <button class="close-modal" id="close-add-vehicle"
                    onclick="document.getElementById('add-vehicle-modal').classList.add('hidden')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="add-vehicle-form">
                    <div class="form-group">
                        <label for="vehicle-imei">IMEI / Device ID *</label>
                        <input type="text" id="vehicle-imei" required placeholder="e.g., 359710048216253">
                        <small>Enter the tracker's IMEI number</small>
                    </div>
                    <div class="form-group">
                        <label for="vehicle-name">Vehicle Name</label>
                        <input type="text" id="vehicle-name" placeholder="e.g., Toyota Hilux - AXK 1234">
                        <small>Optional: Give this vehicle a friendly name</small>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="cancel-add-vehicle">Cancel</button>
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-plus-circle"></i> Add Vehicle
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>
    <script src="/static/auth.js?v=80"></script>
    <script src="/static/app.js?v=90"></script>
</body>

</html>